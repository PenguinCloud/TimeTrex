---
- name: Make sure universe repository is enabled
  apt_repository:
    repo: deb http://archive.ubuntu.com/ubuntu focal universe
    state: present
    update_cache: yes

- name: Add php repo
  apt_repository:
    repo: ppa:ondrej/php
    state: present

- name: Install Dependencies
  apt:
    pkg:
    - unzip
    - nginx
    - php8.1
    - php8.1-cgi
    - php8.1-cli
    - php8.1-pgsql
    - php8.1-pspell
    - php8.1-gd
    - php8.1-gettext
    - php8.1-imap
    - php8.1-intl
    - php8.1-phpdbg
    - php8.1-soap
    - php8.1-zip
    - php8.1-curl
    - php8.1-ldap
    - php8.1-xml
    - php8.1-xsl
    - php8.1-mbstring
    - php8.1-bcmath
    - php8.1-fpm
    - php8.1-simplexml
    - postgresql-client
    - python-openssl
    - python3-psycopg2
    state: latest
    update_cache: yes

- name: Remove php8.2
  apt:
    pkg: php8.2
    state: absent
    purge: true
